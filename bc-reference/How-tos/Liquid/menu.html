<h1>Liquid powered menu</h1>
<h2 id="basic-implementation">Basic implementation</h2>
<p>In this section we will take a look at the most basic implementation of a Liquid powered menu rendered in a simple unordered list.</p>
<p>When using the collection powered render method you can render the output in whetever structure you want (<em>table</em>, <em>list</em>, group of divs).</p>
<h3>Create the menu</h3>
<p>The first thing to do is to create the menu structure in the Admin console. Head over to the <em>Site Manager </em>-&gt; <em>Menu</em> panel and build your menu tree. For this example we'll use this 2 level deep structure below:</p>
<ul id="main-menu" class="sm sm-blue">
   
    
  <li><a href="/">Shop</a> 
      
    <ul>
      
      <li><a href="/classic-boutique">Classic</a> 
          
        <ul>
          
          <li>
              <a href="/woody-parfumes">Woody</a>
          </li>
          
          <li>
              <a href="/spicy-perfumes">Spicy</a>
          </li>
          
        </ul>
         
      </li>
        
      <li><a href="/designer-brands">Designer</a> 
           
      </li>
        
    </ul>
    
  </li>
    
  <li><a href="/BlogRetrieve.aspx?BlogID=4405">Blog</a> 
      
  </li>
    
  <li><a href="/ForumRetrieve.aspx?ForumID=691">Forum</a> 
      
    <ul>
      
      <li><a href="/ForumRetrieve.aspx?ForumID=691">Community</a> 
           
      </li>
        
      <li><a href="/ForumRetrieve.aspx?ForumID=677">Sample Forum 1</a> 
           
      </li>
        
    </ul>
    
  </li>
    
  <li><a href="/faqs">FAQ</a> 
      
  </li>
    
  <li><a href="/about-us">About Us</a> 
      
  </li>
    
  <li><a href="/contact">Contact Us</a> 
      
  </li>
    
  <li><a href="/signup">Sign-Up!</a> 
      
    <ul>
      
      <li><a href="/member/index">Member profile page</a> 
           
      </li>
        
    </ul>
    
  </li>
     
  
</ul>
<h3>Display  it on a page<em></em></h3>
<p>Now that the menu is in place let's insert the menu on the page or template. Create a blank page and insert the menu module like so:</p>
<pre class="language-javascript"><code>&#123;module_menu render="collection" menuId="2165233" template="" collection="menu1"&#125;
</code></pre>
<p>Because we are suppressing the module's output using template="" this module will not output anything. However we can use the <em>menu1</em> collection and Liquid to do the rendering. </p>
<p>Paste the code below just below the menu.</p>
<pre class="language-javascript"><code>&lt;ul id=&quot;main-menu&quot; class=&quot;sm sm-blue&quot;&gt;
  &#123;&#37; if menu1.items &#37;&#125; 
	&#123;&#37; for i in menu1.items &#37;&#125;
  	&lt;li&gt;&lt;a href=&quot;&#123;&#123;i.url&#125;&#125;&quot;&gt;&#123;&#123;i.label&#125;&#125;&lt;/a&gt; 
			&#123;&#37; if i.items &#37;&#125;
     		&lt;ul&gt;
			&#123;&#37; for j in i.items &#37;&#125;
				&lt;li&gt;&lt;a href=&quot;&#123;&#123;j.url&#125;&#125;&quot;&gt;&#123;&#123;j.label&#125;&#125;&lt;/a&gt; 
					&#123;&#37; if j.items &#37;&#125;
        			&lt;ul&gt;
					&#123;&#37; for k in j.items &#37;&#125;
						&lt;li&gt;
            				&lt;a href=&quot;&#123;&#123;k.url&#125;&#125;&quot;&gt;&#123;&#123;k.label&#125;&#125;&lt;/a&gt;
						&lt;/li&gt;
					&#123;&#37; endfor &#37;&#125;
        			&lt;/ul&gt;
        			&#123;&#37; endif &#37;&#125;
				&lt;/li&gt;
			&#123;&#37; endfor &#37;&#125;
    		&lt;/ul&gt;
    		&#123;&#37; endif &#37;&#125;
  	&lt;/li&gt;
   &#123;&#37; endfor &#37;&#125; 
  &#123;&#37; endif &#37;&#125;
&lt;/ul&gt;</code></pre>
<p>Although the code above might look intimidating at first glace it is just a collection of nested <a href="/dev-assets/reference/liquid-reference/reference/logic-tags.html#if">IF</a> and <a href="/dev-assets/reference/liquid-reference/reference/logic-tags.html#for">FOR</a> loops that iterate over each menu item. We first need to check if the current menu item has children and if so iterate over all of them.</p>
<p><strong>Note:</strong> If you need to have a deeper menu you need to add additional IF  and FOR blocks.</p>
<p>The menu will be represented like so:</p>
<pre class="language-javascript"><code>&lt;ul id=&quot;main-menu&quot; class=&quot;sm sm-blue&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Shop&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/classic-boutique&quot;&gt;Classic&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt; &lt;a href=&quot;/woody-parfumes&quot;&gt;Woody&lt;/a&gt; &lt;/li&gt;
          &lt;li&gt; &lt;a href=&quot;/spicy-perfumes&quot;&gt;Spicy&lt;/a&gt; &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/designer-brands&quot;&gt;Designer&lt;/a&gt; &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/BlogRetrieve.aspx?BlogID=4405&quot;&gt;Blog&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/ForumRetrieve.aspx?ForumID=691&quot;&gt;Forum&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/ForumRetrieve.aspx?ForumID=691&quot;&gt;Community&lt;/a&gt; &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/ForumRetrieve.aspx?ForumID=677&quot;&gt;Sample Forum 1&lt;/a&gt; &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/faqs&quot;&gt;FAQ&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/about-us&quot;&gt;About Us&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/contact&quot;&gt;Contact Us&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/signup&quot;&gt;Sign-Up!&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/member/index&quot;&gt;Member profile page&lt;/a&gt; &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>
<p>At this point we have the menu represented as an unordered list on the page. Moving on we can use a 3-rd party menu library to further style and animate it.</p>
<h2>Other menu customizations</h2>
<h3>Show the menu only if the user is logged in</h3>
<h4>The logic</h4>
<p>You seen in a previous section how <a href="#basic-implementation">generate a basic menu using Liquid</a>. Let's pick up from there and see how to show it only to users that have logged in. The logic behind is simple. Take a look at yout visitor details in the <a href="/developers/liquid/getting-started-with-liquid#globals" title="Liquid Global object">Liquid global object</a>: </p>
<code>&#123;&#123;globals.user | json&#125;&#125;</code>
<p>What we need to do is just apply an <a href="/dev-assets/reference/liquid-reference/reference/logic-tags.html#if" title="If Logic Tag (Liquid)">IF condition</a> to the Liquid code that generates the menu markup, so that it carries out the action only <strong>if</strong> the isLoggedIn condition is true
<h4>The build</h4>

<p>To enable this scenario, simply wrap your Liquid menu generation markup with your If condition: </p>
  <p class="alert alert-info">
  <strong>&#123;&#37; if &#123;&#123;globals.user.isLoggedIn&#125;&#125; contains &quot;true&quot; &#37;&#125;</strong> <br>
  - Liquid Code - <br>
  <strong>&#123;&#37; else &#37;&#125;</strong>  <br>
  -Custom message- <br>
  <strong>&#123;&#37; endif &#37;&#125;</strong></p>
<p></p>
  <p>Here's the markup in its basic implementation, with no specific menu plugin used:</p>
 <pre class="language-javascript"><code>&#123;&#37; if &#123;&#123;globals.user.isLoggedIn&#125;&#125; contains &quot;true&quot; &#37;&#125;
&lt;ul&gt;
  &#123;&#37; if menu1.items &#37;&#125; 
	&#123;&#37; for i in menu1.items &#37;&#125;
  	&lt;li&gt;&lt;a href=&quot;&#123;&#123;i.url&#125;&#125;&quot;&gt;&#123;&#123;i.label&#125;&#125;&lt;/a&gt; 
			&#123;&#37; if i.items &#37;&#125;
     		&lt;ul&gt;
			&#123;&#37; for j in i.items &#37;&#125;
				&lt;li&gt;&lt;a href=&quot;&#123;&#123;j.url&#125;&#125;&quot;&gt;&#123;&#123;j.label&#125;&#125;&lt;/a&gt; 
					&#123;&#37; if j.items &#37;&#125;
        			&lt;ul&gt;
					&#123;&#37; for k in j.items &#37;&#125;
						&lt;li&gt;
            				&lt;a href=&quot;&#123;&#123;k.url&#125;&#125;&quot;&gt;&#123;&#123;k.label&#125;&#125;&lt;/a&gt;
						&lt;/li&gt;
					&#123;&#37; endfor &#37;&#125;
        			&lt;/ul&gt;
        			&#123;&#37; endif &#37;&#125;
				&lt;/li&gt;
			&#123;&#37; endfor &#37;&#125;
    		&lt;/ul&gt;
    		&#123;&#37; endif &#37;&#125;
  	&lt;/li&gt;
   &#123;&#37; endfor &#37;&#125; 
  &#123;&#37; endif &#37;&#125;
&lt;/ul&gt;
&#123;&#37; else &#37;&#125;
&lt;p&gt;Some message, maybe&lt;/p&gt;
&#123;&#37; endif &#37;&#125;</code></pre>
<p>Here's how this will output on an actual page:</p> 
<p class="alert alert-warning"><a href="http://liquidexamples.worldsecuresystems.com/general-show-menu-if-logged-in">http://liquidexamples.worldsecuresystems.com/general-show-menu-if-logged-in</a></p>


<h4>Conclusion</h4>
<p>Before the introduction of <strong>Liquid</strong>, this would have only been possible with custom java script implementations. You would load the menu in a hidden container, and display it if the visitor was logged in. Still the menu <strong>was</strong> there. </p><p>Using Liquid, you're acutally enabling (or <strong>not</strong>) the content on the server-side, performing operations and conditions <strong>before</strong> render time, so the output is clean, fast and secure.</p>

<h3>Show the menu only for a specific country code</h3>
<h4>The logic</h4>
<p>You seen in a previous section how <a href="#basic-implementation">generate a basic menu using Liquid</a>. Let's pick up from there and see how to show it only to users from a specific country. The logic behind is simple. Take a look at yout visitor details in the <a href="/developers/liquid/getting-started-with-liquid#globals" title="Liquid Global object">Liquid global object</a>: </p>
<code>&#123;&#123;globals.visitor | json&#125;&#125;</code>
<p>What we need to do is just apply an <a href="/dev-assets/reference/liquid-reference/reference/logic-tags.html#if" title="If Logic Tag (Liquid)">IF condition</a> to the Liquid code that generates the menu markup, so that it carries out the action only <strong>if</strong> the visitor country is &#123;&#123;globals.visitor.country&#125;&#125;
<h4>The build</h4>

<p>To enable this scenario, simply wrap your Liquid menu generation markup with your If condition: </p>
  <p class="alert alert-info">
  <strong>&#123;&#37; if &#123;&#123;globals.site.countryCode&#125;&#125; contains &quot;&#123;&#123;globals.visitor.country&#125;&#125;&quot; &#37;&#125;</strong> <br>
  - Liquid Code - <br>
  <strong>&#123;&#37; else &#37;&#125;</strong>  <br>
  -Custom message- <br>
  <strong>&#123;&#37; endif &#37;&#125;</strong></p>
<p></p>
  <p>Here's the markup in its basic implementation, with no specific menu plugin used:</p>
 <pre class="language-javascript"><code>&#123;&#37; if &#123;&#123;globals.site.countryCode&#125;&#125; contains &quot;XX&quot; &#37;&#125;
&lt;ul&gt;
  &#123;&#37; if menu1.items &#37;&#125; 
	&#123;&#37; for i in menu1.items &#37;&#125;
  	&lt;li&gt;&lt;a href=&quot;&#123;&#123;i.url&#125;&#125;&quot;&gt;&#123;&#123;i.label&#125;&#125;&lt;/a&gt; 
			&#123;&#37; if i.items &#37;&#125;
     		&lt;ul&gt;
			&#123;&#37; for j in i.items &#37;&#125;
				&lt;li&gt;&lt;a href=&quot;&#123;&#123;j.url&#125;&#125;&quot;&gt;&#123;&#123;j.label&#125;&#125;&lt;/a&gt; 
					&#123;&#37; if j.items &#37;&#125;
        			&lt;ul&gt;
					&#123;&#37; for k in j.items &#37;&#125;
						&lt;li&gt;
            				&lt;a href=&quot;&#123;&#123;k.url&#125;&#125;&quot;&gt;&#123;&#123;k.label&#125;&#125;&lt;/a&gt;
						&lt;/li&gt;
					&#123;&#37; endfor &#37;&#125;
        			&lt;/ul&gt;
        			&#123;&#37; endif &#37;&#125;
				&lt;/li&gt;
			&#123;&#37; endfor &#37;&#125;
    		&lt;/ul&gt;
    		&#123;&#37; endif &#37;&#125;
  	&lt;/li&gt;
   &#123;&#37; endfor &#37;&#125; 
  &#123;&#37; endif &#37;&#125;
&lt;/ul&gt;
&#123;&#37; else &#37;&#125;
&lt;p&gt;Some message, maybe&lt;/p&gt;
&#123;&#37; endif &#37;&#125;</code></pre>
<p>Here's how this will output on an actual page:</p> 
<p class="alert alert-warning"><a href="http://liquidexamples.worldsecuresystems.com/general-show-menu-if-country-code-is-XX">http://liquidexamples.worldsecuresystems.com/general-show-menu-if-country-code-is-XX</a></p>
<h4>Bootstrap implementation</h4>
<p>The following is  a specific example, using the <strong>Bootstrap</strong> menu plugin:</p> <p class="alert alert-warning"> <a href="http://liquidexamples.worldsecuresystems.com/bootstrap-show-menu-if-country-code-is-XX">http://liquidexamples.worldsecuresystems.com/bootstrap-show-menu-if-country-code-is-XX</a></p><a class="fancybox" href="/kb_resources/screenshots/liquid_if_bootstrap.jpg">
<img alt="" src="/kb_resources/screenshots/liquid_if_bootstrap.jpg?Action=thumbnail&amp;Width=500&amp;algorithm=fill" /></a>
<pre class=" language-javascript"><code>&lt;ul class=&quot;nav navbar-nav&quot;&gt;
  &#123;&#37; if menu1.items &#37;&#125; 
	&#123;&#37; for i in menu1.items &#37;&#125;	
&#123;&#37; if i.items &#37;&#125;
&lt;li class=&quot;dropdown&quot;&gt;&lt;a class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-expanded=&quot;false&quot; href=&quot;&#123;&#123;i.url&#125;&#125;&quot;&gt;&#123;&#123;i.label&#125;&#125;&lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt; 
&#123;&#37; else &#37;&#125;
&lt;li&gt;&lt;a href=&quot;&#123;&#123;i.url&#125;&#125;&quot;&gt;&#123;&#123;i.label&#125;&#125;&lt;/a&gt; 
			
&#123;&#37; endif &#37;&#125;
&#123;&#37; if i.items &#37;&#125;
     		&lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot;&gt;
			&#123;&#37; for j in i.items &#37;&#125;
				&lt;li&gt;&lt;a href=&quot;&#123;&#123;j.url&#125;&#125;&quot;&gt;&#123;&#123;j.label&#125;&#125;&lt;/a&gt; 
					&#123;&#37; if j.items &#37;&#125;
        			&lt;ul&gt;
					&#123;&#37; for k in j.items &#37;&#125;
						&lt;li&gt;
            				&lt;a href=&quot;&#123;&#123;k.url&#125;&#125;&quot;&gt;&#123;&#123;k.label&#125;&#125;&lt;/a&gt;
						&lt;/li&gt;
					&#123;&#37; endfor &#37;&#125;
        			&lt;/ul&gt;
        			&#123;&#37; endif &#37;&#125;
				&lt;/li&gt;
			&#123;&#37; endfor &#37;&#125;
    		&lt;/ul&gt;
    		&#123;&#37; endif &#37;&#125;
  	&lt;/li&gt;
   &#123;&#37; endfor &#37;&#125; 
  &#123;&#37; endif &#37;&#125;
&lt;/ul&gt;</code></pre>

<h4>Conclusion</h4>
<p>Before the introduction of <strong>Liquid</strong>, this would have only been possible with custom java script implementations. You would load the menu in a hidden container, and display it if the visitor country was a specific value, as rendered by <strong>{</strong><strong>module_visitorcountrycode&#125;</strong>. Still the menu <strong>was</strong> there. </p>
<p>Using Liquid, you're acutally enabling (or <strong>not</strong>) the content on the server-side, performing operations and conditions <strong>before</strong> render time, so the output is clean, fast and secure.</p>
