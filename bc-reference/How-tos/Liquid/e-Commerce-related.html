<h1>e-Commerce related </h1>
<h2>Shopping cart related</h2>
<p>This section covers some common shopping cart related scenarios.</p>
<div id="shopping-cart-quantity">
<h3>Do something if the shopping cart value is over $25</h3>
<p>In this scenario we want to reveal a paragraph (or any other HTML block) that might contain a discount or some other bonuses only for customer who have added more than $25 worth of items in their shopping cart. </p>
<p>You can take this further and use the same principle to check against the product names or product codes and display related products based the contents of the cart.</p>
<p>To build this type of scenario we have to take a few things into account:</p>
<ul>
<li>We want the cart properties to be checked on page load - for example the site visitor adds something to the cart and opens a link of your site in another tab</li>
<li>We would want the check to be performed once again after the <em>Add to cart</em> button is pressed</li>
</ul>
<h4>The setup:</h4>
<ul>
<li>the <em>cart.html</em> page - on this page we will insert the Liquid code to check against the cart parameters and the action we want to take when the value is over or below $25</li>
<li>the javascript code snippet that re-loads the cart.html page after the page is loaded or after the <em>Add to cart</em> button is pressed</li>
<li>the element on the template where we want to put the &quot;success&quot; message in case the cart value is over $25</li>
</ul>
<h4>The build:</h4>
<p class="alert alert-warning">For simplicity we will paste all the javascript code on the template itself and assume all the additional pages are created on the site's root.</p>
<p><strong>Step1</strong> - First of all open the Develop mode editor, create the <em>cart.html</em> page and paste this content:</p>
<pre class="language-javascript"><code>{<span>module_shoppingcartsummary collection=&quot;cart&quot;</span>}
&lt;div class=&quot;content&quot;&gt;

{% assign totalPrice = 0 %}

{%for item in cart.items%}
{% assign totalPrice = totalPrice | plus:item.totalPrice_raw %}
{%endfor%}
    
    {%if totalPrice &gt;= 25%}
    &lt;p&gt;Total value is 25 or larger&lt;/p&gt;
    {%else%}
    &lt;p&gt;Total value is below 25&lt;/p&gt;
    {%endif%}
&lt;/div&gt;</code></pre>
<p>The shoppingcartsummary module above dumps its information in the <em>cart</em> collection. Using a for loop we go over the collection and sum up all the products' prices. We then compare the grand total kept in the <code>totalPrice</code> variable with 25 and display the appropriate message.</p>
<p><strong>Step2 </strong>- the container the paragraph above (which can be a div, a banner or whatever HTML ccode you need) will be pushed to. </p>
<p>Edit your template and insert a div with the class <em>shop-alert</em>. In this example I've inserted this just above the {<span>tag_pagecontent</span>} tag:</p>
<img src="http://screencasteu.worldsecuresystems.com/Mihai/2014-11-13_15.55.16.png" />
<p><strong>Step3 </strong>- add the javascript that brings everything together. Paste the code below at the end of your template, just above the closing &lt;/body&gt; tag:</p>
<pre class="language-javascript"><code>&lt;script&gt;
      readCart()
      $(&#39;.quantity img&#39;).click(function(){
          readCart();
      })
      
      function readCart()
      {
         $(&#39;.shop-alert&#39;).load(&#39;/cart.html .content&#39;)
          
      }
&lt;/script&gt;</code></pre>
<p>The  <em>readCart()</em> function will be triggered both on page load and whenever the "Add to cart" button is pressed. It simply loads the contents of the <em>cart.html</em> page into the div we created at step2. </p>
<p>Do note that if you have customized your template the selectors in the function might need a bit of tweaking to match your site design.</p>
</div>