<h1 apiType="restv3">Orders and products</h1>
<ul id="toc"></ul>
<div id="list">
<h2>Get an order's products</h2>
<div class="description">
<p>Get the products added to an order.</p>
</div>
<div class="request">
<h3>Request</h3>
<ul>
<li><strong>Method:</strong> GET</li>
<li><strong>Version:</strong> v3, this API call supports <a href="/developers/beta/api-v3-sorting-filtering-and-partial-representation-methods">additional sort and filter mechanisms</a> as well as retrieving only a sub-set of fields<p class="alert alert-info"><strong>Note:</strong> In order to access the v3 API endpoints please make sure you have <a href="/developers#!/beta/introduction-to-liquid!enable" target="_blank">enabled the new rendering engine</a>. </p></li><li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/orders/[order_ID]/products
  <ul>
<li>Alternatively, use use siteID instead of 'current'</li>
  </ul>
</li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>
</ul>
</div>
<div class="response">
<h3>Response</h3>

<p>The details for the specified customer ID in JSON format.</p>

<ul>
<li><code>itemId</code> - the address ID <em>(integer)</em></li>
<li><code>orderId</code> - the order's ID <em>(integer)</em></li>

<li><code>productId</code> - the address ID <em>(integer)</em></li>

<li><code>siteId</code> - <em>the site's ID (integer)</em></li>

<li><code>catalogueId</code> - the product's catalog ID<em>(integer)</em>
</li>
<li><code>units</code> - the number of units added to the order <em>(integer)</em></li>
<li><code>unitPrice</code> - price per unit<em> (integer)</em></li>
<li><code>unitTaxRate</code> - the tax per unit <em>(integer)</em></li>
<li><code>discountRate</code> - <em>(integer)</em></li>
<li><code>totalPrice</code> - <em>(integer)</em></li>
<li><code>description</code> - <em>(string)</em></li>
<li><code>supplierCommission</code>- <em>(integer)</em></li>
<li><code>deleted</code> - <em>(boolean)</em></li>
<li><code>attributeExtras</code> - <em>(integer)</em></li>
<li><code>variationId</code> - <em>(integer)</em></li>
<li><code>product</code> - <em>(JSON)</em>
<ul>
<li><code>id</code> - <em>(integer)</em></li>
<li><code>siteId</code> - <em>(integer)</em></li>
<li><code>name</code> - <em>(string)</em></li>
<li><code>roleId</code> - <em>(integer)</em></li>
<li><code>weight</code> - <em>(integer)</em></li>
<li><code>productCode</code> - <em>(string)</em></li>
<li><code>tags</code> - <em>(string)</em></li>
<li><code>unitType</code> - <em>(string)</em></li>
<li><code>smallImage</code> - <em>(string)</em></li>
<li><code>largeImage</code> - <em>(string)</em></li>
<li><code>description</code> - <em>(string)</em></li>
<li><code>inventoryControl</code> - <em>(boolean)</em></li>
<li><code>canPreorder</code> - <em>(boolean)</em></li>
<li><code>minUnits</code> - <em>(integer)</em></li>
<li><code>maxUnits</code> - <em>(integer)</em></li>
<li><code>inStock</code> - <em>(integer)</em></li>
<li><code>onOrder</code> - <em>(integer)</em></li>
<li><code>reOrder</code> - <em>(integer)</em></li>
<li><code>reOrderNotified</code> - <em>(boolean)</em></li>
<li><code>variablePerCycle</code> - <em>(boolean)</em></li>
<li><code>groupingID</code> - <em>(integer)</em></li>
<li><code>GroupingDefault</code> - <em>(boolean)</em></li>
<li><code>electronicProduct</code> - <em>(boolean)</em></li>
<li><code>displayFileName</code> - <em>(string)</em></li>
<li><code>size</code> - <em>(integer)</em></li>
<li><code>downloadLimitCount</code> - <em>(integer)</em></li>
<li><code>downloadLimitIp</code> - <em>(integer)</em></li>
<li><code>productWeight</code> - <em>(integer)</em></li>
<li><code>productVolume</code> - <em>(integer)</em></li>
<li><code>productHeight</code> - <em>(integer)</em></li>
<li><code>productDepth</code> - <em>(integer)</em></li>
<li><code>supplierEntityId</code> - <em>(integer)</em></li>
<li><code>supplierCommission</code> - <em>(integer)</em></li>
<li><code>isGiftVoucher</code> - <em>(boolean)</em></li>
<li><code>poplets</code> - <em>()</em></li>
<li><code>attributes</code> - <em>()</em></li>
<li><code>custom1</code> - <em>(string)</em></li>
<li><code>custom2</code> - <em>(string)</em></li>
<li><code>custom3</code> - <em>(string)</em></li>
<li><code>custom4</code> - <em>(string)</em></li>
<li><code>releaseDate</code> - <em>(date)</em> - the date must be in this format - 2014-09-03T07:00:00</li>
<li><code>expiryDate</code> - <em>(date)</em> - the date must be in this format - 2014-09-03T07:00:00</li>
<li><code>captureDetails</code> - <em>(boolean)</em></li>
<li><code>isOnSale</code> - <em>(boolean)</em></li>
<li><code>hideIfNoStock</code> - <em>(boolean)</em></li>
<li><code>enableDropShipping</code> - <em>(boolean)</em></li>
<li><code>excludeFromSearch</code> - <em>(boolean)</em></li>
<li><code>enabled</code> - <em>(boolean)</em></li>
<li><code>deleted</code> - <em>(boolean)</em></li>
<li><code>title</code> - <em>(string)</em></li>
<li><code>reIndex</code> - <em>(boolean)</em></li>
<li><code>hasAttributes</code> - <em>(boolean)</em></li>
<li><code>cycleTypeCount</code> - <em>(integer)</em></li>
<li><code>hasVariations</code> - <em>(boolean)</em></li>
<li><code>slug</code> - <em>(string)</em></li>
<li><code>metaProductDescription</code> - <em>(string)</em></li>

</ul>
</li>
</ul>
<p class="alert alert-info">The response is paginated, you can return only a few of the customer's fields. Take a look at the <a href="/developers/beta/api-v3-sorting-filtering-and-partial-representation-methods">API V3: sorting and filtering</a> for additional switches you can use.</p>
<p>Accepts and returns JSON as Content-Type.</p>
</div>
<hr>
<div class="request-sample">
<p><strong>Request:</strong></p>

<pre class="language-javascript"><code>GET /webresources/api/v3/sites/current/orders/108293/products HTTPS/1.1
Authorization: 14f87f21c5ea4830a06a6314a8aad82b45bc61dc08f24a0fb55599cea83ca811
Connection: keep-alive
Content-Type: application/json
</code></pre>
</div>
<div class="response-sample">
<p><strong>Response:</strong></p>

<pre class="language-javascript"><code>{
  "items": [
    {
      "itemId": 450,
      "orderId": 108293,
      "productId": 951917,
      "siteId": 38581,
      "catalogueId": null,
      "units": 3,
      "unitPrice": 30,
      "unitTaxRate": 0.5,
      "discountRate": 0,
      "totalPrice": 99,
      "description": "1",
      "supplierCommission": 0,
      "deleted": false,
      "attributeExtras": 0,
      "variationId": 9,
      "deletedByTaskOrAdmin": true,
      "product": {
        "id": 951917,
        "siteId": 38581,
        "name": "T-Shirt",
        "roleId": -1,
        "weight": null,
        "productCode": "D12LSM9Q4F",
        "tags": "",
        "unitType": "",
        "smallImage": "",
        "largeImage": "",
        "description": "\r\n",
        "inventoryControl": true,
        "canPreorder": false,
        "minUnits": 1,
        "maxUnits": -1,
        "inStock": 528,
        "onOrder": 0,
        "reOrder": -1,
        "reOrderNotified": false,
        "variablePerCycle": false,
        "groupingID": null,
        "GroupingDefault": false,
        "electronicProduct": false,
        "displayFileName": null,
        "size": 0,
        "downloadLimitCount": -1,
        "downloadLimitIp": -1,
        "productWeight": -1,
        "productVolume": -1,
        "productHeight": -1,
        "productDepth": -1,
        "supplierEntityId": null,
        "supplierCommission": 0,
        "isGiftVoucher": false,
        "poplets": null,
        "attributes": null,
        "custom1": "",
        "custom2": "",
        "custom3": "",
        "custom4": "",
        "releaseDate": "2014-09-03T07:00:00",
        "expiryDate": "9999-01-01T00:00:00",
        "captureDetails": false,
        "isOnSale": false,
        "hideIfNoStock": false,
        "enableDropShipping": false,
        "excludeFromSearch": false,
        "enabled": true,
        "deleted": false,
        "title": "T-Shirt",
        "reIndex": true,
        "hasAttributes": true,
        "cycleTypeCount": -1,
        "hasVariations": true,
		"slug": "t-shirt",
        "metaProductDescription": ""
      }
    },
    {
      "itemId": 452,
      "orderId": 108293,
      "productId": 951917,
      "siteId": 38581,
      "catalogueId": null,
      "units": 10,
      "unitPrice": 25,
      "unitTaxRate": 0.5,
      "discountRate": 0,
      "totalPrice": 275,
      "description": "111",
      "supplierCommission": 0,
      "deleted": false,
      "attributeExtras": 0,
      "variationId": 9,
      "deletedByTaskOrAdmin": true,
      "product": {
        "id": 951917,
        "siteId": 38581,
        "name": "T-Shirt",
        "roleId": -1,
        "weight": null,
        "productCode": "D12LSM9Q4F",
        "tags": "",
        "unitType": "",
        "smallImage": "",
        "largeImage": "",
        "description": "\r\n",
        "inventoryControl": true,
        "canPreorder": false,
        "minUnits": 1,
        "maxUnits": -1,
        "inStock": 528,
        "onOrder": 0,
        "reOrder": -1,
        "reOrderNotified": false,
        "variablePerCycle": false,
        "groupingID": null,
        "GroupingDefault": false,
        "electronicProduct": false,
        "displayFileName": null,
        "size": 0,
        "downloadLimitCount": -1,
        "downloadLimitIp": -1,
        "productWeight": -1,
        "productVolume": -1,
        "productHeight": -1,
        "productDepth": -1,
        "supplierEntityId": null,
        "supplierCommission": 0,
        "isGiftVoucher": false,
        "poplets": null,
        "attributes": null,
        "custom1": "",
        "custom2": "",
        "custom3": "",
        "custom4": "",
        "releaseDate": "2014-09-03T07:00:00",
        "expiryDate": "9999-01-01T00:00:00",
        "captureDetails": false,
        "isOnSale": false,
        "hideIfNoStock": false,
        "enableDropShipping": false,
        "excludeFromSearch": false,
        "enabled": true,
        "deleted": false,
        "title": "T-Shirt",
        "reIndex": true,
        "hasAttributes": true,
        "cycleTypeCount": -1,
        "hasVariations": true,
        "slug": "t-shirt",
        "metaProductDescription": ""
      }
    }
  ],
  "totalItemsCount": 2,
  "skip": 0,
  "limit": 10
}</code></pre>
</div>
<hr>
<div class="sample">
<h3>Sample code</h3>
<p><strong>Get the addresses for a specific order</strong></p>
<pre class="language-javascript"><code>var access_token = BCAPI.Helper.Site.getAccessToken();
//the authorization token is now stored in the access_token cookie, we will need to pass it in the "Authorization" header

var request = $.ajax({
    url: "/webresources/api/v3/sites/current/orders/7051740/products",
    type: "GET",
    conenection: "keep-alive",
    contentType: "application/json",
    headers: {
        "Authorization": $.cookie('access_token')
    }
});
request.done(function (msg) {
    console.log(msg);
})
request.fail(function (jqXHR) {
    console.log("Request failed.");
    console.log("Error code: " + jqXHR.status);
    console.log("Error text: " + jqXHR.statusText);
    console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
<hr>
</div>


<div id="edit">
<h2>Add products to an order</h2>
<div class="description">Add new products to an order or updates the number of units.</div>
<div class="request">
<h3>Request</h3>
<ul>
<li><strong>Method:</strong> POST</li>
<li><strong>Version:</strong> v3</li><li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/orders/[ORDER_ID]/products
  <ul>
  <li>Alternatively, use use siteID instead of 'current'</li>
</ul>
</li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>
</ul>
<h4>Parameters</h4>
<ul>
  <li><code>itemId</code> - the item's ID, this is used to identify this particular order item. For example if you need to delete an element from an order you would reffer it using this ID<em>(integer)</em></li>
  <li><code>orderId</code> - the order's ID <em>(integer)</em></li>
  <li><code>productId</code> - the address ID <em>(integer)</em></li>
  <li><code>siteId</code> - <em>the site's ID (integer)</em></li>
  <li><code>catalogueId</code> - the product's catalog ID <em>(integer)</em> </li>
  <li><code>units</code> - the number of units added to the order <em>(integer)</em></li>
  <li><code>unitPrice</code> - price per unit<em> (integer)</em></li>
  <li><code>unitTaxRate</code> - the tax per unit <em>(integer)</em></li>
  <li><code>discountRate</code> - <em>(integer)</em></li>
  <li><code>totalPrice</code> - <em>(integer)</em></li>
  <li><code>description</code> - <em>(string)</em></li>
  <li><code>supplierCommission</code>- <em>(integer)</em></li>
  <li><code>deleted</code> - <em>(boolean)</em></li>
  <li><code>attributeExtras</code> - <em>(integer)</em></li>
  <li><code>variationId</code> - <em>(integer)</em></li>

</ul>
</div>
<div class="response">
<h3>Response</h3>

<p>Returns an empty body if successful or a detailed error message.</p>
<p>Accepts and returns JSON as Content-Type.</p>
</div>
<hr>
<div class="request-sample">
<p><strong>Request:</strong></p>

<pre class="language-javascript"><code>POST /webresources/api/v3/sites/current/orders/108293/products HTTPS/1.1
Authorization: 14f87f21c5ea4830a06a6314a8aad82b45bc61dc08f24a0fb55599cea83ca811
Connection: keep-alive
Content-Type: application/json


{
  "items": [
    {
      "productId": 951917,
      "variationId": 9,
      "units": 3,
      "description": "Tailored for you!"
    }
  ]
}</code></pre>
</div>
<div class="response-sample">
<p><strong>Response:</strong></p>

<pre class="language-javascript"><code>
HTTP/1.1 204 NO CONTENT
Location: /webresources/api/v3/sites/current/orders
Content-Type: application/json; charset=utf-8
Content-Length: length</code></pre>
</div>
<hr>
<div class="sample">
<h3>Sample codes</h3>
<p>Add a product to an existing order. If the &quot;units&quot; field is not present only 1 item will be added.</p>
<pre class="language-javascript"><code>var access_token = BCAPI.Helper.Site.getAccessToken();
//the authorization token is now stored in the access_token cookie, we will need to pass it in the "Authorization" header

var request = $.ajax({
url: "/webresources/api/v3/sites/current/orders/108293/products",
type: "PUT",
conenection: "keep-alive",
contentType: "application/json",
headers: {
    "Authorization": $.cookie('access_token')
},
processData: false,
data: JSON.stringify({
   "items": [
    {
      "productId": 951890
    }
  ]
  })
});
request.done(function(msg) {
console.log(msg);
})
request.fail(function(jqXHR) {
console.log("Request failed.");
console.log("Error code: " + jqXHR.status);
console.log("Error text: " + jqXHR.statusText);
console.log("Response text: " + jqXHR.responseText);
})</code></pre>
<p>In this example we will add 3 units of the product with the ID 951917 and variation code 9 to the order:</p>
<pre class="language-javascript"><code>var access_token = BCAPI.Helper.Site.getAccessToken();
//the authorization token is now stored in the access_token cookie, we will need to pass it in the "Authorization" header

var request = $.ajax({
url: "/webresources/api/v3/sites/current/orders/108293/products",
type: "PUT",
conenection: "keep-alive",
contentType: "application/json",
headers: {
    "Authorization": $.cookie('access_token')
},
processData: false,
data: JSON.stringify({
   "items": [
    {
      "productId": 951917,
      "variationId": 9,
      "units": 3,
      "description": "Tailored for you!"
    }
  ]
  })
});
request.done(function(msg) {
console.log(msg);
})
request.fail(function(jqXHR) {
console.log("Request failed.");
console.log("Error code: " + jqXHR.status);
console.log("Error text: " + jqXHR.statusText);
console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
<hr>
</div>
<div id="delete">
<h2>Remove products from an order</h2>
<div class="description">Remove a product from an order.</div>
<div class="request">
<h3>Request</h3>
<ul>
<li><strong>Method:</strong> DELETE</li>
<li><strong>Version:</strong> v3</li><li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/orders/[ORDER_ID]/products?items=[ITEM_ID]
  <ul>
  <li>Alternatively, use use siteID instead of 'current'</li>
</ul>
</li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>
</ul>
</div>
<div class="response">
<h3>Response</h3>

<p>Returns an empty body if successful or a detailed error message.</p>
<p>Accepts and returns JSON as Content-Type.</p>
</div>
<hr>
<div class="request-sample">
<p><strong>Request:</strong></p>

<pre class="language-javascript"><code>DELETE /webresources/api/v3/sites/current/orders/108293/products?items=[450] HTTPS/1.1
Authorization: 14f87f21c5ea4830a06a6314a8aad82b45bc61dc08f24a0fb55599cea83ca811
Connection: keep-alive
Content-Type: application/json
</code></pre>
</div>
<div class="response-sample">
<p><strong>Response:</strong></p>

<pre class="language-javascript"><code>
HTTP/1.1 204 NO CONTENT
Location: /webresources/api/v3/sites/current/orders/108293/products
Content-Type: application/json; charset=utf-8
Content-Length: length</code></pre>
</div>
<hr>
<div class="sample">
<h3>Sample codes</h3>
<p>Add a product to an existing order. If the &quot;units&quot; field is not present only 1 item will be added.</p>
<pre class="language-javascript"><code>var access_token = BCAPI.Helper.Site.getAccessToken();
//the authorization token is now stored in the access_token cookie, we will need to pass it in the "Authorization" header

var request = $.ajax({
url: "/webresources/api/v3/sites/current/orders/108293/products?items=[450]",
type: "DELETE",
conenection: "keep-alive",
contentType: "application/json",
headers: {
    "Authorization": $.cookie('access_token')
}
});
request.done(function(msg) {
console.log(msg);
})
request.fail(function(jqXHR) {
console.log("Request failed.");
console.log("Error code: " + jqXHR.status);
console.log("Error text: " + jqXHR.statusText);
console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
<hr>
</div>