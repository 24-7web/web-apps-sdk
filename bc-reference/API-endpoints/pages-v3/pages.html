<h1>Pages</h1>
<ul id="toc"></ul>
<div id="list">
<h2>List available webpages and get their attributes</h2>
<div class="description">
<p>This section details the endpoints you can use to list the webpages created on a particular site and get their properties.</p>
</div>
<div class="request">
<h2>Request</h2>
<ul>
<li><strong>Method:</strong> GET</li>

<li><strong>Version:</strong> v3, this API call supports <a href="/developers/beta/api-v3-sorting-filtering-and-partial-representation-methods">additional sort and filter mechanisms</a> as well as retrieving only a sub-set of fields<p class="alert alert-info"><strong>Note:</strong> In order to access the v3 API endpoints please make sure you have <a href="/developers#!/beta/introduction-to-liquid!enable" target="_blank">enabled the new rendering engine</a>. </p></li>
<li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/pages

  <ul>
<li>Alternatively, use use siteID instead of 'current'</li>
</ul></li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>

</ul>
</div>
<div class="response">
<h2>Response</h2>
<p>An array of the first 10 web pages; each object has the following properties:</p>
<ul>
  <li><code>id</code> - the page's ID</li>
  <li><code>siteId</code> - the ID of the site the page is on</li>
  <li><code>url</code> - the page's URL</li>
  <li><code>name</code> - the page's NAME</li>
  <li><code>deleted</code> - whether the page is deleted or not</li>
  <li><code>categoryId</code> - the ID of the category (-1 of the page is not classified)</li>
  <li><code>roleId</code> - the ID of the role responsible (-1 if not applicable)</li>
  <li><code>templateId</code> - the ID of the template (-1 if no template is applied or 0 to use the default template)</li>
  <li><code>parentId</code> - the ID of the parent folder (-1 if the page is placed in the site's root folder) </li>
  <li><code>displayFileName</code> - the page's display name</li>
  <li><code>size</code> - the page's size</li>
  <li><code>enabled</code> - whether the page is enabled or not</li>
  <li><code>startPage</code> - whether the page is set as start page</li>
  <li><code>releaseDate</code> - the release date of the page</li>
  <li><code>expiryDate</code> - the expiry date of the page</li>
  <li><code>displayable</code> - whether the page is live or it is a draft page</li>
  <li><code>excludeFromSearch</code> - whether to exclude the page from the site search</li>
  <li><code>livePageId</code> - only applicable if the "displayable" parameter is "true" (meaning this is a draft page). The "livePageId" is the ID of the corresponding live page.</li>
  <li><code>content</code> - the content of the page</li>
  <li><code>redirect301</code> - the URL this page should 301 redirect to</li>
  <li><code>pageTitle</code> - the page's title</li>
  <li><code>seoMetadataDescription</code> - the page's SEO meta description</li>
</ul>
<p>Accepts and returns JSON as Content-Type.</p>
<hr>
</div>
<div class="sample">
<h2>Sample code</h2>
<pre class="language-javascript"><code>var request = $.ajax({
    url: "/webresources/api/v3/sites/current/pages",
    type: "GET",
    conenection: "keep-alive",
    contentType: "application/json",
    headers: {
        "Authorization": $.cookie('access_token')
    }
});
request.done(function (msg) {
    console.log(msg);
})
request.fail(function (jqXHR) {
    console.log("Request failed.");
    console.log("Error code: " + jqXHR.status);
    console.log("Error text: " + jqXHR.statusText);
    console.log("Response text: " + jqXHR.responseText);
})</code></pre>
<p><strong>Sample response</strong></p>
<pre class="language-javascript"><code>
{
  "items": [
    {
      "id": 2411253,
      "siteId": 38581,
      "url": "/page1",
      "name": "Page 1 name",
      "deleted": false,
      "categoryId": -1,
      "roleId": -1,
      "templateId": -1,
      "parentId": -1,
      "displayFileName": "page1.htm",
      "size": 183,
      "enabled": false,
      "startPage": false,
      "releaseDate": "2044-01-01T00:00:00",
      "expiryDate": "9999-01-01T00:00:00",
      "displayable": true,
      "excludeFromSearch": true,
      "livePageId": null,
      "content": "Page1 content",
      "redirect301": "",
      "pageTitle": "Page1 title",
      "seoMetadataDescription": "Sample metadata"
    },
    {
      "id": 2411254,
      "siteId": 38581,
      "url": "/page2",
      "name": "page2",
      "deleted": false,
      "categoryId": -1,
      "roleId": -1,
      "templateId": 0,
      "parentId": -1,
      "displayFileName": "page2.html",
      "size": 16993,
      "enabled": true,
      "startPage": false,
      "releaseDate": "2009-05-11T07:00:00",
      "expiryDate": "9999-01-01T00:00:00",
      "displayable": true,
      "excludeFromSearch": false,
      "livePageId": null,
      "content": "Page2 content&quot;,
      "redirect301": "",
      "pageTitle": "Page2",
      "seoMetadataDescription": "Sample metadata"
    }
],
"totalItemsCount": 2,    
"skip": 0,    
"limit": 10
}
      </code></pre>
</div>
<hr>
</div>
<div id="details">
<h2>Get a webpage's attributes</h2>
<div class="request">
<h2>Request</h2>

<ul>
<li><strong>Method:</strong> GET</li>
<li><strong>Version:</strong> v3, this API call supports <a href="/developers/beta/api-v3-sorting-filtering-and-partial-representation-methods">additional sort and filter mechanisms</a> as well as retrieving only a sub-set of fields<p class="alert alert-info"><strong>Note:</strong> In order to access the v3 API endpoints please make sure you have <a href="/developers#!/beta/introduction-to-liquid!enable" target="_blank">enabled the new rendering engine</a>. </p></li>
<li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/pages/[page_ID]

  <ul>
<li>Alternatively, use use siteID instead of 'current'</li>
</ul></li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>

</ul>
</div>
<div class="response">
<h2>Response</h2>

<p>Returns the properties below for a single page:</p>
<ul>
  <li><code>id</code> - the page's ID</li>
  <li><code>siteId</code> - the ID of the site the page is on</li>
  <li><code>url</code> - the page's URL</li>
  <li><code>name</code> - the page's NAME</li>
  <li><code>deleted</code> - whether the page is deleted or not</li>
  <li><code>categoryId</code> - the ID of the workflow assigned (-1 of the page does not have a workflow assigned)</li>
  <li><code>roleId</code> - the ID of the role responsible (-1 if not applicable)</li>
  <li><code>templateId</code> - the ID of the template (-1 if no template is applied or 0 to use the default template)</li>
  <li><code>parentId</code> - the ID of the parent folder (-1 if the page is placed in the site's root folder)</li>
  <li><code>displayFileName</code> - the page's display name</li>
  <li><code>size</code> - the page's size</li>
  <li><code>enabled</code> - whether the page is enabled or not</li>
  <li><code>startPage</code> - whether the page is set as start page</li>
  <li><code>releaseDate</code> - the release date of the page</li>
  <li><code>expiryDate</code> - the expiry date of the page</li>
  <li><code>displayable</code> - whether the page is live or it is a draft page</li>
  <li><code>excludeFromSearch</code> - whether to exclude the page from the site search</li>
  <li><code>livePageId</code> - only applicable if the "displayable" parameter is "true" (meaning this is a draft page). The "livePageId" is the ID of the live page.</li>
  <li><code>content</code> - the content of the page</li>
  <li><code>redirect301</code> - the URL this page should 301 redirect to</li>
  <li><code>pageTitle</code> - the page's title</li>
  <li><code>seoMetadataDescription</code> - the page's SEO meta description</li>
</ul>
<p>Accepts and returns JSON as Content-Type.</p>
<hr>
<h2>Sample code</h2>
<pre class="language-javascript"><code>var request = $.ajax({
    url: "/webresources/api/v3/sites/current/pages/2411253",
    type: "GET",
    conenection: "keep-alive",
    contentType: "application/json",
    headers: {
        "Authorization": $.cookie('access_token')
    }
});
request.done(function (msg) {
    console.log(msg);
})
request.fail(function (jqXHR) {
    console.log("Request failed.");
    console.log("Error code: " + jqXHR.status);
    console.log("Error text: " + jqXHR.statusText);
    console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
<div class="sample">
<h3>Sample response</h3>
<pre class="language-javascript"><code>{
      "id": 2411253,
      "siteId": 38581,
      "url": "/page1",
      "name": "Page 1 name",
      "deleted": false,
      "categoryId": -1,
      "roleId": -1,
      "templateId": -1,
      "parentId": -1,
      "displayFileName": "page1.htm",
      "size": 183,
      "enabled": false,
      "startPage": false,
      "releaseDate": "2044-01-01T00:00:00",
      "expiryDate": "9999-01-01T00:00:00",
      "displayable": true,
      "excludeFromSearch": true,
      "livePageId": null,
      "content": "Page1 content",
      "redirect301": "",
      "pageTitle": "Page1 title",
      "seoMetadataDescription": "Sample metadata"
}
</code></pre>
</div>
<hr>
</div>
<div id="create">
  <h2>Create new live and draft pages</h2>
<div class="request">
<h2>Request</h2>

<ul>
<li><strong>Method:</strong> POST</li>
<li><strong>Version:</strong> v3</li>
<li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/pages

  <ul>
<li>Alternatively, use use siteID instead of 'current'</li>
</ul></li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>

</ul>
</div>
<div class="response">
<h2>Response</h2>
The response should be "201 created" if the page was successfully created.
<p>Here are the parameters you can use when creating a page:</p>
<ul>
  <li><code>id</code> - the page's ID</li>
  <li><code>siteId</code> - the ID of the site the page is on</li>
  <li><code>url</code> - the page's URL</li>
  <li><code>name</code> - the page's NAME</li>
  <li><code>deleted</code> - whether the page is deleted or not</li>
  <li><code>categoryId</code> - the ID of the workflow assigned (-1 of the page does not have a workflow assigned)</li>
  <li><code>roleId</code> - the ID of the role responsible (-1 if not applicable)</li>
  <li><code>templateId</code> - the ID of the template (-1 if no template is applied or 0 to use the default template)</li>

  <li><code>displayFileName</code> - the page's display name</li>
  <li><code>size</code> - the page's size</li>
  <li><code>enabled</code> - whether the page is enabled or not</li>
  <li><code>startPage</code> - whether the page is set as start page</li>
  <li><code>releaseDate</code> - the release date of the page</li>
  <li><code>expiryDate</code> - the expiry date of the page</li>
  <li><code>displayable</code> - whether the page is live or it is a draft page</li>
  <li><code>excludeFromSearch</code> - whether to exclude the page from the site search</li>
  <li><code>livePageId</code> - only applicable if the "displayable" parameter is "true" (meaning this is a draft page). The "livePageId" is the ID of the live page.</li>
  <li><code>content</code> - the content of the page HTML encoded</li>
  <li><code>redirect301</code> - the URL this page should 301 redirect to</li>
  <li><code>pageTitle</code> - the page's title</li>
  <li><code>seoMetadataDescription</code> - the page's SEO meta description</li>
</ul>
</div>
<div class="sample">
<h2>Sample code</h2>
<p><strong>In the example below we create a brand new Live page:</strong></p>
<pre class="language-javascript"><code>var request = $.ajax({
  url: "/webresources/api/v3/sites/current/pages",
  data: JSON.stringify({
    "name": "About-page",
    "url": "/about-page",
    "deleted": false,
    &quot;displayable&quot;: true,
    "displayFileName": "About",
    "content": "&lt;h1&gt;This is my About page&lt;/h1&gt;&lt;p&gt;Some content here&lt;/p&gt;",
    "templateId": "0"
  }),
  type: "POST",
  contentType: "application/json",
  headers: {
    "Authorization": $.cookie('access_token')
  }
});
request.done(function(msg) {
  $('.output pre').html(JSON.stringify(msg));
  console.log(msg);
})
request.fail(function(jqXHR) {
  console.log("Request failed.");
  console.log("Error code: " + jqXHR.status);
  console.log("Error text: " + jqXHR.statusText);
  console.log("Response text: " + jqXHR.responseText);
})</code></pre>
<p id="sample-create-live"><strong>Create a Draft page for the page above</strong></p>
<p>The draft will need to have a corresponsing Live page (it cannot exist as a stand alone draft). You will notice the call is almost identical but for a single parameter. <code>livePageId</code> serves two purposes - it  <strong>marks this page as draft </strong>and specifies <strong>what page this is the draft for</strong>:</p>
<pre class="language-javascript"><code>var request = $.ajax({
  url: "/webresources/api/v3/sites/current/pages",
  data: JSON.stringify({
    "name": "About-page2",
    "url": "/about-page2",
	  &quot;livePageId&quot;: 13752869,
    "deleted": false,
    "displayFileName": "About - new",
    "content": "&lt;h1&gt;This is my About page&lt;/h1&gt;&lt;p&gt;Some newer content here&lt;/p&gt;",
    "templateId": "0"
  }),
  type: "POST",
  contentType: "application/json",
  headers: {
    "Authorization": $.cookie('access_token')
  }
});
request.done(function(msg) {
  $('.output pre').html(JSON.stringify(msg));
  console.log(msg);
})
request.fail(function(jqXHR) {
  console.log("Request failed.");
  console.log("Error code: " + jqXHR.status);
  console.log("Error text: " + jqXHR.statusText);
  console.log("Response text: " + jqXHR.responseText);
})</code></pre>
<p>In this example below we will take live (Publish) the draft page created above live. This means its content of the draft page will replace the content of the page with the ID <em>13752869</em> (the original About page).</p>
<p>Before we run the call that actually publishes the page there is an extra step we need to take into account. We know the ID of the live page, we specified it when creating the draft. What is the ID of the draft page itself? </p>
<p class="alert alert-info"><strong>Note:</strong> the live and draft pages are treated as sepparated entities, each of them is a stand-alone page, with a different ID and optionally even a different URL.</p>
<p id="sample-get-draft-url"><strong>Get the URL of the draft page</strong></p>
<pre class="language-javascript"><code>var request = $.ajax({
  url: '/webresources/api/v3/sites/current/pages?where={"livePageId":13752911}',
  type: "GET",
  contentType: "application/json",
  headers: {
    "Authorization": $.cookie('access_token')
  }
});
request.done(function(msg) {
//this logs the ID of the draft page  
console.log(msg.items[0].id);
})
request.fail(function(jqXHR) {
  console.log("Request failed.");
  console.log("Error code: " + jqXHR.status);
  console.log("Error text: " + jqXHR.statusText);
  console.log("Response text: " + jqXHR.responseText);
})</code></pre>
<p id="sample-publish-draft"><strong>Taking a draft page live (publishing it)</strong></p>
<p>Now that we know the ID of the draft page (<em>13752930</em>) let's take it live:</p>
<pre class="language-javascript"><code>var request = $.ajax({
  url: "/webresources/api/v3/sites/current/pages/13752930?publish=true",
  type: "POST",
  contentType: "application/json",
  headers: {
    "Authorization": $.cookie('access_token')
  }
});
request.done(function(msg) {
  $('.output pre').html(JSON.stringify(msg));
  console.log(msg);
})
request.fail(function(jqXHR) {
  console.log("Request failed.");
  console.log("Error code: " + jqXHR.status);
  console.log("Error text: " + jqXHR.statusText);
  console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
</div>
<div id="edit">
<h2>Edit an existing page</h2>
<div class="request">
<h2>Request</h2>

<ul>
<li><strong>Method:</strong> GET</li>
<li><strong>Version:</strong> v3</li>
<li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/templates

<ul>
<li>Alternatively, use use siteID instead of 'current'</li>
</ul></li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>

</ul>
</div>
<div class="response">
<h2>Response</h2>

<p>The response should be "204 no content" if the secure zone was successfully modified.</p>
<p>Here are the parameters you can use when updating a page:</p>
<ul>
  <li><code>id</code> - the page's ID</li>
  <li><code>siteId</code> - the ID of the site the page is on</li>
  <li><code>url</code> - the page's URL</li>
  <li><code>name</code> - the page's NAME</li>
  <li><code>deleted</code> - whether the page is deleted or not</li>
  <li><code>categoryId</code> - the ID of the workflow assigned (-1 of the page does not have a workflow assigned)</li>
  <li><code>roleId</code> - the ID of the role responsible (-1 if not applicable)</li>
  <li><code>templateId</code> - the ID of the template (-1 if no template is applied or 0 to use the default template)</li>
  <li><code>displayFileName</code> - the page's display name</li>
  <li><code>size</code> - the page's size</li>
  <li><code>enabled</code> - whether the page is enabled or not</li>
  <li><code>startPage</code> - whether the page is set as start page</li>
  <li><code>releaseDate</code> - the release date of the page</li>
  <li><code>expiryDate</code> - the expiry date of the page</li>
  <li><code>displayable</code> - whether the page is live or it is a draft page</li>
  <li><code>excludeFromSearch</code> - whether to exclude the page from the site search</li>
  <li><code>livePageId</code> - only applicable if the "displayable" parameter is "true" (meaning this is a draft page). The "livePageId" is the ID of the live page.</li>
  <li><code>content</code> - the content of the page HTML encoded</li>
  <li><code>redirect301</code> - the URL this page should 301 redirect to</li>
  <li><code>pageTitle</code> - the page's title</li>
  <li><code>seoMetadataDescription</code> - the page's SEO meta description</li>
</ul>
</div>
<hr>
<div class="sample">
<h2>Sample code</h2>
<p>In this example let's remove the template for the page with the ID <em>4518294</em>. To do this we will assign the tempalte with the <em>ID -1</em>:</p>
<pre class="language-javascript"><code>var request = $.ajax({
	url: "/webresources/api/v3/sites/current/pages/4518294",
  data: JSON.stringify({
        "name": "Card - modified",
        "templateId" : "-1"
                }),
         type: "PUT",
         contentType: "application/json",
         headers: {
            "Authorization": $.cookie('access_token')
          }
});
request.done(function (msg) {
    console.log(msg);
})
request.fail(function (jqXHR) {
    console.log("Request failed.");
    console.log("Error code: " + jqXHR.status);
    console.log("Error text: " + jqXHR.statusText);
    console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
<hr>
</div>
<div id="delete">

        <h2>Delete a webpage</h2>
<div class="description">
<p>This section details the endpoints you can use to delete a webpage.</p>
</div>

<div class="request">
<h2>Request</h2>

<ul>
<li><strong>Method:</strong> DELETE</li>
<li><strong>Version:</strong> v3</li>
<li><strong>Server:</strong>  https://[app key here]-[site_ID here]-apps.worldsecuresystems.com. Take a look at the <a href="/developers/developer-documentation/authorize-your-api-calls">OAuth in Business Catalyst</a> document for more info on how this URL is formed.

<ul>
<li>Note: When building apps always use relative request URLs. Do not use the "full" URL above because you might have problems running your app on a different site as the site_ID parameter will be different.</li>
</ul></li>
<li><strong>Path:</strong> /webresources/api/v3/sites/current/pages/[page_ID]

  <ul>
<li>Alternatively, use use siteID instead of 'current'</li>
</ul></li>
<li><strong>Authorization header:</strong> This should contain the authorization token. Here is how to <a href="/developers/developer-documentation/authorize-your-api-calls">obtain the token</a>.</li>

</ul>
</div>
<div class="response">
<h2>Response</h2>

<p>The response should be &quot;204 no content&quot; if the page was successfully deleted.</p>
</div>
<hr>
<div class="sample">
<h2>Sample code</h2>
<pre class="language-javascript"><code>var request = $.ajax({
    url: "/webresources/api/v3/sites/current/pages/2567169",
    type: "DELETE",
    conenection: "keep-alive",
    contentType: "application/json",
    headers: {
        "Authorization": $.cookie('access_token')
    }
});
request.done(function (msg) {
    console.log(msg);
})
request.fail(function (jqXHR) {
    console.log("Request failed.");
    console.log("Error code: " + jqXHR.status);
    console.log("Error text: " + jqXHR.statusText);
    console.log("Response text: " + jqXHR.responseText);
})</code></pre>
</div>
<hr>
</div>
