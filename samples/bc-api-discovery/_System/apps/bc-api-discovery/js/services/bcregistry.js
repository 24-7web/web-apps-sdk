/* 
* 
* Copyright (c) 2012-2014 Adobe Systems Incorporated. All rights reserved.

* Permission is hereby granted, free of charge, to any person obtaining a
* copy of this software and associated documentation files (the "Software"), 
* to deal in the Software without restriction, including without limitation 
* the rights to use, copy, modify, merge, publish, distribute, sublicense, 
* and/or sell copies of the Software, and to permit persons to whom the 
* Software is furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
* DEALINGS IN THE SOFTWARE.
* 
*/

(function(app) {
	/**
	 * @constructor
	 * @descriptor
	 * This service implements the http client for loading all BC registered resources and providing them
	 * to the application.
	 */
	function BcRegistryService($http, $q, configService) {
		this._httpService = $http;
		this._$q = $q;
		this._configService = configService;
	};

	/**
	 * @public
	 * @instance
	 * @method
	 * @description
	 * This method loads BC and BC Support registries for webresources, unifies them and return the final result through a promise.
	 */
	BcRegistryService.prototype.getRegistry = function() {
		var bcRegistryLoader = this._loadBcRegistry(),
			result = this._$q.defer();

		bcRegistryLoader.then(function(data) {
			result.resolve(data);
		});

		return result.promise;
	};

	/**
	 * @private
	 * @instance
	 * @method
	 * @returns {promise} A promise which can be used to determine when BC Registry async operation is resolved.
	 * @description
	 * This method fetches bc registry and stores it locally for future use.
	 */
	BcRegistryService.prototype._loadBcRegistry = function() {
		var registry = {"catalogs":{"v3":{"fields":{"identifier":{"catalogueId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"parentId":{"type":"integer"},"templateId":{"type":"integer"},"roleId":{"type":"integer"},"displayTypeId":{"type":"integer"},"weight":{"type":"integer"},"name":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"image":{"type":"string"},"releaseDate":{"type":"datetime"},"expiryDate":{"type":"datetime"},"notify":{"type":"string"},"useFriendlyUrl":{"type":"boolean"},"excludeFromFeed":{"type":"boolean"},"enabled":{"type":"boolean"},"deleted":{"type":"boolean"},"minPrice":{"type":"integer"},"maxPrice":{"type":"integer"},"priceSlots":{"type":"integer"},"productsStatsXml":{"type":"string"},"reIndex":{"type":"boolean"}},"singleRelation":{},"manyRelation":{"discountcodes":{"url":"/webresources/api/v3/sites/current/catalogs/:catalogueId/discountcodes","version":"v3","type":"catalogdiscountcodes"},"excludedShippingOptions":{"url":"/webresources/api/v3/sites/current/catalogs/:catalogueId/excludedShippingOptions","version":"v3","type":"shippingoptionscatalogues"},"products":{"url":"/webresources/api/v3/sites/current/catalogs/:catalogueId/products","version":"v3","type":"catalogproducts"}}},"url":"/webresources/api/v3/sites/current/catalogs"}},"catalogproducts":{"v3":{"fields":{"identifier":{"productId":{"type":"integer"},"catalogueId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"canonicalCatalog":{"type":"boolean"}},"singleRelation":{"product":{"version":"v3","type":"products"},"catalogue":{"version":"v3","type":"catalogs"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/catalogproducts"}},"customertypes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"label":{"type":"string"},"default":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/customertypes"}},"anniversaries":{"v3":{"fields":{"identifier":{"customerId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"anniversary1Date":{"type":"datetime"},"anniversary1Title":{"type":"string"},"anniversary2Date":{"type":"datetime"},"anniversary2Title":{"type":"string"},"anniversary3Date":{"type":"datetime"},"anniversary3Title":{"type":"string"},"anniversary4Date":{"type":"datetime"},"anniversary4Title":{"type":"string"},"anniversary5Date":{"type":"datetime"},"anniversary5Title":{"type":"string"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/anniversaries"}},"discountcodes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"discountType":{"type":"integer"},"code":{"type":"string"},"description":{"type":"string"},"discountPercentageOrFixedAmount":{"type":"integer"},"discountThreshold":{"type":"integer"},"expireAfterXUses":{"type":"integer"},"releaseDate":{"type":"datetime"},"expiryDate":{"type":"datetime"},"enabled":{"type":"boolean"}},"singleRelation":{},"manyRelation":{"catalogs":{"url":"/webresources/api/v3/sites/current/discountcodes/:id/catalogs","version":"v3","type":"catalogdiscountcodes"},"orders":{"url":"/webresources/api/v3/sites/current/discountcodes/:id/orders","version":"v3","type":"orders"}}},"url":"/webresources/api/v3/sites/current/discountcodes"}},"giftvouchers":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"orderId":{"type":"integer"},"countryCode":{"type":"string"},"code":{"type":"string"},"recipientName":{"type":"string"},"recipientEmail":{"type":"string"},"message":{"type":"string"},"totalValue":{"type":"integer"},"createdByAdmin":{"type":"boolean"},"enabled":{"type":"boolean"}},"singleRelation":{"order":{"version":"v3","type":"orders"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/giftvouchers"}},"catalogdiscountcodes":{"v3":{"fields":{"identifier":{"discountCodeId":{"type":"integer"},"catalogueId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{},"singleRelation":{"discountCode":{"version":"v3","type":"discountcodes"},"catalogue":{"version":"v3","type":"catalogs"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/catalogdiscountcodes"}},"notifications":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"notificationType":{"type":"integer"},"templateId":{"type":"integer"},"fromAddress":{"type":"string"},"emailFormat":{"type":"integer"},"subject":{"type":"string"},"body":{"type":"string"},"objectType":{"type":"integer"},"objectId":{"type":"integer"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/notifications"}},"orderstatuses":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"label":{"type":"string"},"default":{"type":"boolean"},"notifyCustomer":{"type":"boolean"},"siteNotificationId":{"type":"integer"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/orderstatuses"}},"orderitems":{"v3":{"fields":{"identifier":{"itemId":{"type":"integer"},"orderId":{"type":"integer"},"productId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"variationId":{"type":"integer"},"catalogueId":{"type":"integer"},"units":{"type":"integer"},"unitPrice":{"type":"numeric"},"unitTaxRate":{"type":"numeric"},"totalPrice":{"type":"numeric"},"description":{"type":"string"},"attributeExtras":{"type":"numeric"},"deletedByTaskOrAdmin":{"type":"boolean"}},"singleRelation":{"product":{"version":"v3","type":"products"},"order":{"version":"v3","type":"orders"},"variation":{"version":"v3","type":"variations"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/orderitems"}},"orders":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"entityId":{"type":"integer"},"categoryId":{"type":"integer"},"statusTypeId":{"type":"integer"},"discountCodeId":{"type":"integer"},"shippingOptionId":{"type":"integer"},"paymentMethodTypeId":{"type":"integer"},"taxCodeId":{"type":"integer"},"giftVoucherId":{"type":"integer"},"cycleTypeId":{"type":"integer"},"directDebitTypeId":{"type":"integer"},"integrationId":{"type":"string"},"parentId":{"type":"integer"},"assignedUserId":{"type":"integer"},"name":{"type":"string"},"countryCode":{"type":"string"},"shippingPrice":{"type":"numeric"},"shippingTaxRate":{"type":"numeric"},"discountRate":{"type":"numeric"},"giftVoucherAmount":{"type":"numeric"},"totalPrice":{"type":"numeric"},"shippingDescription":{"type":"string"},"shippingAttention":{"type":"string"},"shippingInstructions":{"type":"string"},"quote":{"type":"boolean"},"invoiced":{"type":"boolean"},"invoiceNumber":{"type":"string"},"invoiceDate":{"type":"datetime"},"recur":{"type":"boolean"},"nextInvoiceDate":{"type":"datetime"},"endRecurDate":{"type":"datetime"},"directDebitDays":{"type":"integer"},"directDebitProcessed":{"type":"boolean"},"createDate":{"type":"datetime"},"destinationAddressIsResidential":{"type":"boolean"},"isIntermediate":{"type":"boolean"},"shippingRateKey":{"type":"string"}},"singleRelation":{"status":{"version":"v3","type":"orderstatuses"},"discountCode":{"version":"v3","type":"discountcodes"},"workflow":{"version":"v3","type":"workflows"},"customer":{"version":"v3","type":"customers"},"taxCode":{"version":"v3","type":"taxcodes"},"assignedUser":{"version":"v3","type":"siteusers"}},"manyRelation":{"products":{"url":"/webresources/api/v3/sites/current/orders/:id/products","version":"v3","type":"orderitems"},"addresses":{"url":"/webresources/api/v3/sites/current/orders/:id/addresses","version":"v3","type":"addresses"}}},"url":"/webresources/api/v3/sites/current/orders"}},"outbound-emails":{"v3":{"fields":{"identifier":{"outboundEmailTypeId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"templateId":{"type":"integer"},"fromAddress":{"type":"string"},"emailFormat":{"type":"integer"},"subject":{"type":"string"},"body":{"type":"string"},"lastUpdateDate":{"type":"datetime"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/outbound-emails"}},"postcodes":{"v3":{"fields":{"identifier":{"postcode":{"type":"string"}},"primary":{"suburb":{"type":"string"},"state":{"type":"string"},"countryCode":{"type":"string"},"latitude":{"type":"integer"},"longitude":{"type":"integer"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/postcodes"}},"prices":{"v3":{"fields":{"identifier":{"productId":{"type":"integer"},"siteId":{"type":"integer"},"countryCode":{"type":"string"}},"primary":{"taxCodeId":{"type":"integer"},"wTaxCodeId":{"type":"integer"},"retailPrice":{"type":"numeric"},"salePrice":{"type":"numeric"},"salePrice2":{"type":"numeric"},"salePrice3":{"type":"numeric"},"quantity2":{"type":"integer"},"quantity3":{"type":"integer"},"wSalePrice":{"type":"numeric"},"wSalePrice2":{"type":"numeric"},"wSalePrice3":{"type":"numeric"},"wQuantity2":{"type":"numeric"},"wQuantity3":{"type":"numeric"}},"singleRelation":{"wTaxCode":{"version":"v3","type":"taxcodes"},"taxCode":{"version":"v3","type":"taxcodes"},"product":{"version":"v3","type":"products"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/prices"}},"shippingoptionscatalogues":{"v3":{"fields":{"identifier":{"optionId":{"type":"integer"},"catalogueId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{},"singleRelation":{"shippingOption":{"version":"v3","type":"shippingoptions"},"catalogue":{"version":"v3","type":"catalogs"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/shippingoptionscatalogues"}},"shippingoptions":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"description":{"type":"string"},"price":{"type":"integer"},"type":{"type":"integer"},"packageType":{"type":"integer"},"taxCodeId":{"type":"integer"},"countryCode":{"type":"string"},"state":{"type":"string"},"postcode":{"type":"string"},"productMinWeight":{"type":"integer"},"productMinVolume":{"type":"integer"},"productMinHeight":{"type":"integer"},"productMinDepth":{"type":"integer"},"productMaxWeight":{"type":"integer"},"productMaxVolume":{"type":"integer"},"productMaxHeight":{"type":"integer"},"productMaxDepth":{"type":"integer"},"totalOrderPriceMin":{"type":"integer"},"totalOrderPriceMax":{"type":"integer"},"handlingBaseCharge":{"type":"integer"},"handlingPerItemCharge":{"type":"integer"},"freeThreshold":{"type":"integer"},"limitDeliveryTo":{"type":"string"},"userAccountNumber":{"type":"string"},"userAccountId":{"type":"string"},"userAccountKey":{"type":"string"},"userAccountPassword":{"type":"string"},"upsAccountType":{"type":"integer"},"upsPackageType":{"type":"integer"},"upsConfirmationType":{"type":"integer"}},"singleRelation":{},"manyRelation":{"excludedFromCatalogues":{"url":"/webresources/api/v3/sites/current/shippingoptions/:id/excludedFromCatalogues","version":"v3","type":"shippingoptionscatalogues"}}},"url":"/webresources/api/v3/sites/current/shippingoptions"}},"siteusers":{"v3":{"fields":{"identifier":{"userId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"canLogin":{"type":"boolean"},"isAccounts":{"type":"boolean"}},"singleRelation":{"user":{"version":"v3","type":"users"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/siteusers"}},"taxcodes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"countryCode":{"type":"string"},"code":{"type":"string"},"rate":{"type":"numeric"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/taxcodes"}},"addresses":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"addressType":{"type":"integer"},"objectId":{"type":"integer"},"objectType":{"type":"integer"},"default":{"type":"boolean"},"address1":{"type":"string"},"address2":{"type":"string"},"postcode":{"type":"string"},"city":{"type":"string"},"countryCode":{"type":"string"},"state":{"type":"string"}},"singleRelation":{"customer":{"version":"v3","type":"customers"},"order":{"version":"v3","type":"orders"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/addresses"}},"addresstypes":{"v3":{"fields":{"identifier":{"addressTypeId":{"type":"integer"}},"primary":{"addressType":{"type":"string"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/addresstypes"}},"contactinformation":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"phoneNumberTypeId":{"type":"integer"},"objectId":{"type":"integer"},"objectType":{"type":"integer"},"value":{"type":"string"},"default":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/contactinformation"}},"customers":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"customerTypeId":{"type":"integer"},"leadSourceTypeId":{"type":"integer"},"industryTypeId":{"type":"integer"},"ratingTypeId":{"type":"integer"},"titleTypeId":{"type":"integer"},"firstName":{"type":"string"},"middleName":{"type":"string"},"lastName":{"type":"string"},"company":{"type":"string"},"dateOfBirth":{"type":"datetime"},"username":{"type":"string"},"wholesaler":{"type":"boolean"}},"singleRelation":{"homePhone":{"version":"v3","type":"contactinformation"},"homeFax":{"version":"v3","type":"contactinformation"},"workPhone":{"version":"v3","type":"contactinformation"},"workFax":{"version":"v3","type":"contactinformation"},"mobilePhone":{"version":"v3","type":"contactinformation"},"pager":{"version":"v3","type":"contactinformation"},"email1":{"version":"v3","type":"contactinformation"},"email2":{"version":"v3","type":"contactinformation"},"email3":{"version":"v3","type":"contactinformation"},"webAddress":{"version":"v3","type":"contactinformation"},"anniversary":{"version":"v3","type":"anniversaries"},"industryType":{"version":"v3","type":"industrytypes"},"leadSourceType":{"version":"v3","type":"leadsourcetypes"},"customerType":{"version":"v3","type":"customertypes"},"ratingType":{"version":"v3","type":"ratingtypes"},"titleType":{"version":"v3","type":"titletypes"}},"manyRelation":{"orders":{"url":"/webresources/api/v3/sites/current/customers/:id/orders","version":"v3","type":"orders"},"addresses":{"url":"/webresources/api/v3/sites/current/customers/:id/addresses","version":"v3","type":"addresses"},"securezones":{"url":"/webresources/api/v3/sites/current/customers/:id/securezones","version":"v3","type":"zone-customers"}}},"url":"/webresources/api/v3/sites/current/customers"}},"masterentities":{"v3":{"fields":{"identifier":{"entityId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"type":{"type":"integer"},"masterOptIn":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/masterentities"}},"folders":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"parentId":{"type":"integer"},"folderName":{"type":"string"},"folderPath":{"type":"string"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/folders"}},"industrytypes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"label":{"type":"string"},"default":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/industrytypes"}},"leadsourcetypes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"label":{"type":"string"},"default":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/leadsourcetypes"}},"pages":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"workflowId":{"type":"integer"},"roleId":{"type":"integer"},"templateId":{"type":"integer"},"parentId":{"type":"integer"},"livePageId":{"type":"integer"},"url":{"type":"string"},"name":{"type":"string"},"displayFileName":{"type":"string"},"size":{"type":"integer"},"enabled":{"type":"boolean"},"startPage":{"type":"boolean"},"releaseDate":{"type":"datetime"},"expiryDate":{"type":"datetime"},"displayable":{"type":"boolean"},"excludeFromSearch":{"type":"boolean"},"content":{"type":"string"},"redirect301":{"type":"string"},"pageTitle":{"type":"string"},"seoMetadataDescription":{"type":"string"}},"singleRelation":{"template":{"version":"v3","type":"templates"},"livePage":{"version":"v3","type":"pages"},"workflow":{"version":"v3","type":"workflows"},"parent":{"version":"v3","type":"folders"}},"manyRelation":{"securezones":{"url":"/webresources/api/v3/sites/current/pages/:id/securezones","version":"v3","type":"zone-objects"}}},"url":"/webresources/api/v3/sites/current/pages"}},"booking-customer-relations":{"v3":{"fields":{"identifier":{"subscriptionId":{"type":"integer"},"bookingId":{"type":"integer"},"customerId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"deleted":{"type":"boolean"},"allocation":{"type":"integer"},"bookingStatus":{"type":"integer"}},"singleRelation":{"customer":{"version":"v3","type":"customers"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/booking-customer-relations"}},"bookings":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"name":{"type":"string"},"body":{"type":"string"},"scheduledDate":{"type":"datetime"},"capacity":{"type":"integer"},"hideWhenFull":{"type":"boolean"},"disabled":{"type":"boolean"},"deleted":{"type":"boolean"},"requiresPayment":{"type":"boolean"}},"singleRelation":{},"manyRelation":{"subscribers":{"url":"/webresources/api/v3/sites/current/bookings/:id/subscribers","version":"v3","type":"booking-customer-relations"}}},"url":"/webresources/api/v3/sites/current/bookings"}},"products":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"name":{"type":"string"},"roleId":{"type":"integer"},"weight":{"type":"integer"},"productCode":{"type":"string"},"tags":{"type":"string"},"unitType":{"type":"string"},"smallImage":{"type":"string"},"largeImage":{"type":"string"},"description":{"type":"string"},"inventoryControl":{"type":"boolean"},"canPreorder":{"type":"boolean"},"minUnits":{"type":"integer"},"maxUnits":{"type":"integer"},"inStock":{"type":"integer"},"onOrder":{"type":"integer"},"reOrder":{"type":"integer"},"reOrderNotified":{"type":"boolean"},"variablePerCycle":{"type":"boolean"},"groupingID":{"type":"integer"},"GroupingDefault":{"type":"boolean"},"electronicProduct":{"type":"boolean"},"displayFileName":{"type":"string"},"size":{"type":"integer"},"downloadLimitCount":{"type":"integer"},"downloadLimitIp":{"type":"integer"},"productWeight":{"type":"integer"},"productVolume":{"type":"integer"},"productHeight":{"type":"integer"},"productDepth":{"type":"integer"},"supplierEntityId":{"type":"integer"},"supplierCommission":{"type":"integer"},"isGiftVoucher":{"type":"boolean"},"poplets":{"type":"string"},"attributes":{"type":"string"},"custom1":{"type":"string"},"custom2":{"type":"string"},"custom3":{"type":"string"},"custom4":{"type":"string"},"releaseDate":{"type":"datetime"},"expiryDate":{"type":"datetime"},"captureDetails":{"type":"boolean"},"isOnSale":{"type":"boolean"},"hideIfNoStock":{"type":"boolean"},"enableDropShipping":{"type":"boolean"},"excludeFromSearch":{"type":"boolean"},"enabled":{"type":"boolean"},"deleted":{"type":"boolean"},"title":{"type":"string"},"reIndex":{"type":"boolean"},"hasAttributes":{"type":"boolean"},"cycleTypeCount":{"type":"integer"},"hasVariations":{"type":"boolean"},"metaProductDescription":{"type":"string"}},"singleRelation":{},"manyRelation":{"prices":{"url":"/webresources/api/v3/sites/current/products/:id/prices","version":"v3","type":"prices"},"orders":{"url":"/webresources/api/v3/sites/current/products/:id/orders","version":"v3","type":"orderitems"},"variations":{"url":"/webresources/api/v3/sites/current/products/:id/variations","version":"v3","type":"variations"},"catalogs":{"url":"/webresources/api/v3/sites/current/products/:id/catalogs","version":"v3","type":"catalogproducts"}}},"url":"/webresources/api/v3/sites/current/products"}},"ratingtypes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"label":{"type":"string"},"default":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/ratingtypes"}},"securezones":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"landingPageId":{"type":"integer"},"name":{"type":"string"},"sellAccess":{"type":"boolean"},"costPerPeriod":{"type":"numeric"},"orderCountryCode":{"type":"string"},"cycleType":{"type":"integer"}},"singleRelation":{},"manyRelation":{"customers":{"url":"/webresources/api/v3/sites/current/securezones/:id/customers","version":"v3","type":"zone-customers"},"pages":{"url":"/webresources/api/v3/sites/current/securezones/:id/pages","version":"v3","type":"zone-objects"}}},"url":"/webresources/api/v3/sites/current/securezones"}},"zone-customers":{"v3":{"fields":{"identifier":{"customerId":{"type":"integer"},"zoneId":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{},"singleRelation":{"secureZone":{"version":"v3","type":"securezones"},"customer":{"version":"v3","type":"customers"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/zone-customers"}},"zone-objects":{"v3":{"fields":{"identifier":{"objectId":{"type":"integer"},"zoneId":{"type":"integer"},"objectType":{"type":"integer"},"displayable":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{},"singleRelation":{"secureZone":{"version":"v3","type":"securezones"},"page":{"version":"v3","type":"pages"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/zone-objects"}},"templates-content":{"v3":{"fields":{"identifier":{"templateId":{"type":"integer"},"siteId":{"type":"integer"},"deviceId":{"type":"integer"}},"primary":{"content":{"type":"string"},"size":{"type":"integer"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/templates-content"}},"templates":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"workflowId":{"type":"integer"},"liveTemplateId":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"displayFileName":{"type":"string"},"printerView":{"type":"boolean"},"displayable":{"type":"boolean"},"deleted":{"type":"boolean"},"enabled":{"type":"boolean"},"default":{"type":"boolean"},"noHeaders":{"type":"boolean"}},"singleRelation":{"mobileContent":{"version":"v3","type":"templates-content"},"tabletContent":{"version":"v3","type":"templates-content"},"desktopContent":{"version":"v3","type":"templates-content"},"liveTemplate":{"version":"v3","type":"templates"},"workflow":{"version":"v3","type":"workflows"}},"manyRelation":{"pages":{"url":"/webresources/api/v3/sites/current/templates/:id/pages","version":"v3","type":"pages"}}},"url":"/webresources/api/v3/sites/current/templates"}},"titletypes":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"label":{"type":"string"},"default":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/titletypes"}},"users":{"v3":{"fields":{"identifier":{"id":{"type":"integer"}},"primary":{"siteId":{"type":"integer"},"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"mobileNumber":{"type":"string"},"aliases":{"type":"string"},"mail":{"type":"boolean"},"catchAll":{"type":"boolean"},"superUser":{"type":"boolean"},"enabled":{"type":"boolean"},"userTypeId":{"type":"integer"},"totalLogins":{"type":"integer"},"lastLogin":{"type":"datetime"},"alternateEmail":{"type":"string"},"nextNPSSurveyDate":{"type":"datetime"},"adminRedirect":{"type":"integer"},"isNewUser":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/users"}},"siteurls":{"v3":{"fields":{"identifier":{"id":{"type":"integer"}},"primary":{"siteId":{"type":"integer"},"url":{"type":"string"},"defaultCountryCode":{"type":"string"},"default":{"type":"boolean"},"system":{"type":"boolean"},"secure":{"type":"boolean"},"mail":{"type":"boolean"},"startObjectTypeId":{"type":"integer"},"startObjectId":{"type":"integer"},"deleted":{"type":"boolean"},"culture":{"type":"string"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/siteurls"}},"variations":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"productId":{"type":"integer"},"sku":{"type":"string"},"inStock":{"type":"integer"},"onOrder":{"type":"integer"},"enabled":{"type":"boolean"}},"singleRelation":{"product":{"version":"v3","type":"products"}},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/variations"}},"workflows":{"v3":{"fields":{"identifier":{"id":{"type":"integer"},"siteId":{"type":"integer"}},"primary":{"name":{"type":"string"},"description":{"type":"string"},"orders":{"type":"boolean"},"deleted":{"type":"boolean"}},"singleRelation":{},"manyRelation":{}},"url":"/webresources/api/v3/sites/current/workflows"}}};

		var registryLoader = this._$q.defer();

		setTimeout(function() {
			registryLoader.resolve(registry);
		}, 200);

		return registryLoader.promise;
	};

	app.service("BcRegistryService", ["$http", "$q", "ConfigService", BcRegistryService]);
})(DiscoveryApp);