<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Documentation Source: src/cors_boot.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.flatly.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Documentation</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="BCAPI.html">BCAPI</a>
						</li>
						
						<li>
							<a href="BCAPI.Config.html">Config</a>
						</li>
						
						<li>
							<a href="BCAPI.Config.Pagination.html">Pagination</a>
						</li>
						
						<li>
							<a href="BCAPI.Helper.html">Helper</a>
						</li>
						
						<li>
							<a href="BCAPI.Helper.CORS.html">CORS</a>
						</li>
						
						<li>
							<a href="BCAPI.Helper.Site.html">Site</a>
						</li>
						
						<li>
							<a href="BCAPI.Mocks.html">Mocks</a>
						</li>
						
						<li>
							<a href="BCAPI.Mocks.Helper.html">Helper</a>
						</li>
						
						<li>
							<a href="BCAPI.Mocks.Models.html">Models</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.html">Models</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.FileSystem.html">FileSystem</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.html">WebApp</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="BCAPI.Helper.CORS.CorsBoot.html">CorsBoot</a>
						</li>
						
						<li>
							<a href="BCAPI.Mocks.Models.PersonCollection.PersonCollection.html">PersonCollection</a>
						</li>
						
						<li>
							<a href="BCAPI.Mocks.Models.PersonModel.html">PersonModel</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.Category.html">Category</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.CategoryCollection.html">CategoryCollection</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.Collection.html">Collection</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.Country.html">Country</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.CountryCollection.html">CountryCollection</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.FileSystem.File.html">File</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.FileSystem.Folder.html">Folder</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.Model.html">Model</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.App.html">App</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.AppCollection.html">AppCollection</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.Country.html">Country</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.CustomField.html">CustomField</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.CustomFieldCollection.html">CustomFieldCollection</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.Item.html">Item</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.ItemCategory.html">ItemCategory</a>
						</li>
						
						<li>
							<a href="BCAPI.Models.WebApp.ItemCollection.html">ItemCollection</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="tutorial-create_image_gallery.html">Create Image Gallery</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: src/cors_boot.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript ">(function ($) {	
	/**
	 * This namespace contains the classes used to make CORS (cross origin resource sharing) work
	 * on IE9 and less. We need this because Business Catalyst APIs are on a different domain than
	 * admin console.
	 * 
	 * @namespace BCAPI.Helper.CORS
	 */
	BCAPI.Helper.CORS = {};
	
	/**
	 * This class boots the frameproxy (iframe) used to fix CORS ajax calls on IE9 and less.
	 * 
	 * @name CorsBoot
	 * @class
	 * @constructor
	 * @memberOf BCAPI.Helper.CORS
	 * 
	 * @param {JQuery} jQuery JQuery instance which can be used in CORS fix.
	 * @param {String} rootUrl Of Business Catalyst APIs.
	 */
	BCAPI.Helper.CORS.CorsBoot = function(jQuery, rootUrl) {
		this._jQuery = jQuery;
		this._rootUrl = rootUrl;
	};
	
	/**
	 * This method detect the Internet Explorer version based on user agent and app name.
	 * 
	 * @name _getIEVersion
	 * @method
	 * @instance
	 * @memberOf BCAPI.Helper.CORS.CorsBoot
	 * @returns {Number} Internet Explorer version or -1 for any other browser.
	 */
	BCAPI.Helper.CORS.CorsBoot.prototype._getIEVersion = function() {
        var rv = -1;
        
        if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null)
                rv = parseFloat(RegExp.$1);
        }
        
        return rv;
    };
    
    /**
     * This method enables CORS support for Internet Explorer browsers.
     * 
     * @name boot
     * @method
     * @instance
     * @memberOf BCAPI.Helper.CORS.CorsBoot
     */
    BCAPI.Helper.CORS.CorsBoot.prototype.boot = function() {
        var ieVersion = this._getIEVersion();
        
        if (ieVersion == -1) {
        	return;
        }
        
        this._jQuery.ajaxSetup({ cache: false });
        
        var proxy = new frameproxy.ProxyClient(this._rootUrl + '/AdminConsoleXT/frameproxy.htm');
        proxy.wrapAll(true);
                    
        this._jQuery.currentFrameProxy = proxy;        
    };
    
    var corsBoot = new BCAPI.Helper.CORS.CorsBoot($, BCAPI.Helper.Site.getRootUrl());
    corsBoot.boot();
})(jQuery);</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0</a>
		on Wed Sep 25 2013 14:18:37 GMT+0300 (EEST) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>
